
//-----------------1.歌曲，歌词数据
var song1=[{"time":8,"lineLyric":"编曲: 李懋扬（T2o）、徐一"},{"time":11,"lineLyric":"发行公司：齐鼓文化"},{"time":"","lineLyric":""},{"time":30,"lineLyric":"红颜醉 为谁"},{"time":33,"lineLyric":"辗转千年痛心扉"},{"time":36,"lineLyric":"梦一回 化作泪"},{"time":41,"lineLyric":"孤单的凄美"},{"time":43,"lineLyric":"雪纷飞 叹离别"},{"time":47,"lineLyric":"风沙岁月不轮回"},{"time":51,"lineLyric":"奈何夙愿难遂"},{"time":55,"lineLyric":"悠悠琴声魂欲坠"},{"time":"","lineLyric":""},{"time":60,"lineLyric":"你是谁的白衣少年"},{"time":64,"lineLyric":"为何留恋人世间"},{"time":67,"lineLyric":"一声叹息 一去不返"},{"time":71,"lineLyric":"夜长衣凉不成眠"},{"time":74,"lineLyric":"你是谁的白衣少年"},{"time":78,"lineLyric":"刻下决别的断点"},{"time":81,"lineLyric":"我情愿"},{"time":83,"lineLyric":"此生不必繁华相见"},{"time":"","lineLyric":""},{"time":115,"lineLyric":"红颜醉 为谁"},{"time":119,"lineLyric":"辗转千年痛心扉"},{"time":122,"lineLyric":"梦一回 化作泪"},{"time":127,"lineLyric":"孤单的凄美"},{"time":129,"lineLyric":"雪纷飞 叹离别"},{"time":133,"lineLyric":"风沙岁月不轮回"},{"time":137,"lineLyric":"奈何夙愿难遂"},{"time":140,"lineLyric":"悠悠琴声魂欲坠"},{"time":"","lineLyric":""},{"time":146,"lineLyric":"你是谁的白衣少年"},{"time":150,"lineLyric":"为何留恋人世间"},{"time":153,"lineLyric":"一声叹息 一去不返"},{"time":157,"lineLyric":"夜长衣凉不成眠"},{"time":160,"lineLyric":"你是谁的白衣少年"},{"time":164,"lineLyric":"刻下决别的断点"},{"time":167,"lineLyric":"我情愿"},{"time":169,"lineLyric":"此生不必繁华相见"},{"time":"","lineLyric":""},{"time":174,"lineLyric":"若今生要道离别"},{"time":177,"lineLyric":"擦肩掠过你容颜"},{"time":181,"lineLyric":"一片痴情 一心所往"},{"time":184,"lineLyric":"余温残留在指间"},{"time":"","lineLyric":""},{"time":187,"lineLyric":"若今生注定忘却"},{"time":191,"lineLyric":"遗落寄情的红笺"},{"time":194,"lineLyric":"我情愿"},{"time":198,"lineLyric":"此生断了与你的缘"},{"time":202,"lineLyric":"情愿"},{"time":205,"lineLyric":"此生断了与你的缘"}] || []

var song2 = [{"time":0,"lineLyric":"[by:1992年11月]"},{"time":16,"lineLyric":"从什么都没有的地方"},{"time":19,"lineLyric":"到什么都没有的地方"},{"time":22,"lineLyric":"我们 像没发生事一样"},{"time":25,"lineLyric":"自顾地 走在路上"},{"time":30,"lineLyric":"忘掉了的人只是泡沫"},{"time":33,"lineLyric":"用双手轻轻一触就破"},{"time":36,"lineLyric":"泛黄 有他泛黄的理由"},{"time":39,"lineLyric":"思念将 越来越薄"},{"time":43,"lineLyric":"你微风中浮现的 从前的面容"},{"time":46,"lineLyric":"已被吹送到天空"},{"time":49,"lineLyric":"我在脚步急促的城市之中"},{"time":53,"lineLyric":"依然一个人生活"},{"time":57,"lineLyric":"我也曾经憧憬过 后来没结果"},{"time":60,"lineLyric":"只能靠一首歌真的在说我"},{"time":64,"lineLyric":"是用那种特别干哑的喉咙"},{"time":67,"lineLyric":"唱着淡淡的哀愁"},{"time":70,"lineLyric":"我也曾经作梦过 后来更寂寞"},{"time":74,"lineLyric":"我们能留下的其实都没有"},{"time":78,"lineLyric":"原谅我用特别沧桑的喉咙"},{"time":81,"lineLyric":"假装我很怀旧"},{"time":84,"lineLyric":"假装我很痛"},{"time":104,"lineLyric":"从什么都没有的地方"},{"time":107,"lineLyric":"到什么都没有的地方"},{"time":110,"lineLyric":"我们 像没发生事一样"},{"time":113,"lineLyric":"自顾地 走在路上"},{"time":118,"lineLyric":"忘掉了的人只是泡沫"},{"time":121,"lineLyric":"用双手轻轻一触就破"},{"time":124,"lineLyric":"泛黄 有他泛黄的理由"},{"time":127,"lineLyric":"思念将 越来越薄"},{"time":131,"lineLyric":"你微风中浮现的 从前的面容"},{"time":135,"lineLyric":"已被吹送到天空"},{"time":138,"lineLyric":"我在脚步急促的城市之中"},{"time":142,"lineLyric":"依然一个人生活"},{"time":149,"lineLyric":"我也曾经憧憬过 后来没结果"},{"time":152,"lineLyric":"只能靠一首歌真的在说我"},{"time":156,"lineLyric":"是用那种特别干哑的喉咙"},{"time":159,"lineLyric":"唱着淡淡的哀愁"},{"time":162,"lineLyric":"我也曾经作梦过 后来更寂寞"},{"time":166,"lineLyric":"我们能留下的其实都没有"},{"time":170,"lineLyric":"原谅我用特别沧桑的喉咙"},{"time":173,"lineLyric":"假装我很怀旧"},{"time":176,"lineLyric":"假装我很痛"},{"time":181,"lineLyric":"我也曾经憧憬过 后来没结果"},{"time":184,"lineLyric":"只能靠一首歌真的在说我"},{"time":188,"lineLyric":"是用那种特别干哑的喉咙"},{"time":191,"lineLyric":"唱着淡淡的哀愁"},{"time":194,"lineLyric":"我也曾经作梦过 后来更寂寞"},{"time":198,"lineLyric":"我们能留下的其实都没有"},{"time":202,"lineLyric":"原谅我用特别沧桑的喉咙"},{"time":205,"lineLyric":"假装我很怀旧"},{"time":208,"lineLyric":"假装我很痛"},{"time":212,"lineLyric":"其实我真的很怀旧"},{"time":217,"lineLyric":"而且也很痛"}] || []

var song3 = [{"time":3,"lineLyric":"[编曲：沈佶]"},{"time":5,"lineLyric":""},{"time":26,"lineLyric":"寒蝉凄切，对长亭晚，骤雨初歇。"},{"time":35,"lineLyric":"都门帐饮无绪，留恋处，兰舟催发。"},{"time":43,"lineLyric":"执手相看泪眼，竟无语凝噎。"},{"time":52,"lineLyric":"念去去，千里烟波，暮霭沉沉楚天阔。"},{"time":61,"lineLyric":"多情自古伤离别，更那堪冷落清秋节！"},{"time":69,"lineLyric":"今宵酒醒何处？杨柳岸，晓风残月。"},{"time":78,"lineLyric":"此去经年，应是良辰好景虚设。便纵有千种风情，更与何人说？"},{"time":134,"lineLyric":"寒蝉凄切，对长亭晚，骤雨初歇。"},{"time":142,"lineLyric":"都门帐饮无绪，留恋处，兰舟催发。"},{"time":150,"lineLyric":"执手相看泪眼，竟无语凝噎。"},{"time":158,"lineLyric":"念去去，千里烟波，暮霭沉沉楚天阔。"},{"time":168,"lineLyric":"多情自古伤离别，更那堪冷落清秋节！"},{"time":177,"lineLyric":"今宵酒醒何处？杨柳岸，晓风残月。"},{"time":185,"lineLyric":"此去经年，应是良辰好景虚设。便纵有千种风情，更与何人说？"},{"time":213,"lineLyric":""},{"time":209,"lineLyric":""},{"time":209,"lineLyric":"混音：E/周天澈"},{"time":210,"lineLyric":"琵琶：雅文/陈梦璐"},{"time":210,"lineLyric":"弦乐：国际首席爱乐乐团"},{"time":210,"lineLyric":"制作人：银临"},{"time":211,"lineLyric":""}] || []

var song4 = [{"time":0,"lineLyric":"[by:CopperSulphate]"},{"time":19,"lineLyric":"あの日見渡した渚を"},{"time":24,"lineLyric":"今も思い出すんだ"},{"time":29,"lineLyric":"砂の上に刻んだ言葉"},{"time":34,"lineLyric":"君の後ろ姿"},{"time":39,"lineLyric":"寄り返す波が"},{"time":42,"lineLyric":"足元をよぎり何かを攫う"},{"time":49,"lineLyric":"夕凪の中"},{"time":52,"lineLyric":"日暮れだけが通り過ぎて行く"},{"time":59,"lineLyric":"パッと光って咲いた"},{"time":61,"lineLyric":"花火を見ていた"},{"time":64,"lineLyric":"きっとまだ 終わらない夏が"},{"time":69,"lineLyric":"曖昧な心を 解かして繋いだ"},{"time":74,"lineLyric":"この夜が 続いて欲しかった"},{"time":89,"lineLyric":"「あと何度君と同じ花火を见れるかなって"},{"time":94,"lineLyric":"笑う顔に何ができるだろうか"},{"time":99,"lineLyric":"傷つくこと 喜ぶこと繰り返す波と情動"},{"time":104,"lineLyric":"焦燥 最終列車の音"},{"time":109,"lineLyric":"何度でも 言葉にして君を呼ぶよ"},{"time":114,"lineLyric":"波間を選び もう一度"},{"time":119,"lineLyric":"もう二度と悲しまずに済むように"},{"time":136,"lineLyric":"はっと息を飲めば"},{"time":139,"lineLyric":"消えちゃいそうな光が"},{"time":141,"lineLyric":"きっとまだ 胸に住んでいた"},{"time":146,"lineLyric":"手を伸ばせば触れた"},{"time":149,"lineLyric":"あったかい未来は"},{"time":151,"lineLyric":"ひそかに二人を見ていた"},{"time":157,"lineLyric":"パッと花火が（パッと花火が）"},{"time":159,"lineLyric":"夜に咲いた（夜に咲いた）"},{"time":162,"lineLyric":"夜に咲いて（夜に咲いて）"},{"time":164,"lineLyric":"静かに消えた（静かに消えた）"},{"time":167,"lineLyric":"離さないで（離れないで）"},{"time":169,"lineLyric":"もう少しだけ（もう少しだけ）"},{"time":172,"lineLyric":"もう少しだけ"},{"time":173,"lineLyric":"このままで"},{"time":186,"lineLyric":"あの日見渡した渚を"},{"time":191,"lineLyric":"今も思い出すんだ"},{"time":196,"lineLyric":"砂の上に刻んだ言葉"},{"time":201,"lineLyric":"君の後ろ姿"},{"time":206,"lineLyric":"パッと光って咲いた"},{"time":209,"lineLyric":"花火を見ていた"},{"time":211,"lineLyric":"きっとまだ 終わらない夏が"},{"time":216,"lineLyric":"曖昧な心を 解かして繋いだ"},{"time":221,"lineLyric":"この夜が 続いて欲しかった"}] || []

var song5 = [{"time":0,"lineLyric":"[by:立酱]"},{"time":"","lineLyric":""},{"time":"","lineLyric":""},{"time":0,"lineLyric":"编曲：DMYoung"},{"time":"","lineLyric":""},{"time":2,"lineLyric":"「Hanser」"},{"time":"","lineLyric":""},{"time":3,"lineLyric":"在树影下喝彩 在路灯下旋转"},{"time":"","lineLyric":""},{"time":6,"lineLyric":"在无人的空房间和灯影作伴"},{"time":"","lineLyric":""},{"time":9,"lineLyric":""},{"time":"","lineLyric":""},{"time":10,"lineLyric":"「泠鸢」"},{"time":"","lineLyric":""},{"time":10,"lineLyric":"手臂张开伸展 定格完美画面"},{"time":"","lineLyric":""},{"time":13,"lineLyric":"用笑脸去渲染"},{"time":"","lineLyric":""},{"time":16,"lineLyric":""},{"time":"","lineLyric":""},{"time":16,"lineLyric":"「Hanser」"},{"time":"","lineLyric":""},{"time":17,"lineLyric":"满天交错光线撞击地面"},{"time":"","lineLyric":""},{"time":20,"lineLyric":"每一道都碎成音符飞溅"},{"time":"","lineLyric":""},{"time":24,"lineLyric":""},{"time":"","lineLyric":""},{"time":24,"lineLyric":"「泠鸢」"},{"time":"","lineLyric":""},{"time":24,"lineLyric":"踩踏上重拍在弱拍跳跃"},{"time":"","lineLyric":""},{"time":28,"lineLyric":"把快乐聚拢成一点"},{"time":"","lineLyric":""},{"time":30,"lineLyric":""},{"time":"","lineLyric":""},{"time":31,"lineLyric":"「合」再蔓延"},{"time":"","lineLyric":""},{"time":32,"lineLyric":""},{"time":"","lineLyric":""},{"time":47,"lineLyric":"「泠鸢」"},{"time":"","lineLyric":""},{"time":47,"lineLyric":"沉闷的下午气压骤减 手心"},{"time":"","lineLyric":""},{"time":50,"lineLyric":"张开接住滴落的雨点"},{"time":"","lineLyric":""},{"time":54,"lineLyric":"匆忙地穿梭在人群间 和你"},{"time":"","lineLyric":""},{"time":58,"lineLyric":"擦肩而过踪影就不见"},{"time":"","lineLyric":""},{"time":60,"lineLyric":""},{"time":"","lineLyric":""},{"time":60,"lineLyric":"「Hanser」"},{"time":"","lineLyric":""},{"time":61,"lineLyric":"一段熟悉街拍 一句惯用对白"},{"time":"","lineLyric":""},{"time":64,"lineLyric":"是否在我身边早已不再孤单"},{"time":"","lineLyric":""},{"time":67,"lineLyric":""},{"time":"","lineLyric":""},{"time":67,"lineLyric":"「泠鸢」"},{"time":"","lineLyric":""},{"time":68,"lineLyric":"我们从未相见 我们各自徘徊"},{"time":"","lineLyric":""},{"time":71,"lineLyric":"但我们 却牵绊"},{"time":"","lineLyric":""},{"time":74,"lineLyric":""},{"time":"","lineLyric":""},{"time":75,"lineLyric":"「合」满天交错光线搭建舞台"},{"time":"","lineLyric":""},{"time":78,"lineLyric":"每一次跳跃都闪烁变幻"},{"time":"","lineLyric":""},{"time":82,"lineLyric":"绚烂的应援荧光棒链接"},{"time":"","lineLyric":""},{"time":86,"lineLyric":"交织我们的经纬线"},{"time":"","lineLyric":""},{"time":89,"lineLyric":""},{"time":"","lineLyric":""},{"time":89,"lineLyric":"每一次对望都相隔遥远"},{"time":"","lineLyric":""},{"time":93,"lineLyric":"每一个动作都和你重叠"},{"time":"","lineLyric":""},{"time":97,"lineLyric":"指尖伸出轻敲下播放键"},{"time":"","lineLyric":""},{"time":100,"lineLyric":"世界另一端的邀约"},{"time":"","lineLyric":""},{"time":103,"lineLyric":""},{"time":"","lineLyric":""},{"time":103,"lineLyric":"都看见"},{"time":"","lineLyric":""},{"time":105,"lineLyric":""},{"time":"","lineLyric":""},{"time":119,"lineLyric":"「Hanser」"},{"time":"","lineLyric":""},{"time":120,"lineLyric":"看你的舞蹈反复推敲 琢磨"},{"time":"","lineLyric":""},{"time":123,"lineLyric":"不知何时能体会领要"},{"time":"","lineLyric":""},{"time":126,"lineLyric":""},{"time":"","lineLyric":""},{"time":126,"lineLyric":"「泠鸢」"},{"time":"","lineLyric":""},{"time":126,"lineLyric":"学你的姿态反复对照 不知"},{"time":"","lineLyric":""},{"time":130,"lineLyric":"不觉就已成长了不少"},{"time":"","lineLyric":""},{"time":133,"lineLyric":""},{"time":"","lineLyric":""},{"time":133,"lineLyric":"「Hanser」"},{"time":"","lineLyric":""},{"time":133,"lineLyric":"我们各自奔跑 我们各自摔倒"},{"time":"","lineLyric":""},{"time":137,"lineLyric":"在拍落了尘土后对各自微笑"},{"time":"","lineLyric":""},{"time":140,"lineLyric":"每一次的骄傲 每一次超越"},{"time":"","lineLyric":""},{"time":144,"lineLyric":""},{"time":"","lineLyric":""},{"time":144,"lineLyric":"我都想要"},{"time":"","lineLyric":""},{"time":145,"lineLyric":"能让你"},{"time":"","lineLyric":""},{"time":147,"lineLyric":""},{"time":"","lineLyric":""},{"time":147,"lineLyric":"知道"},{"time":"","lineLyric":""},{"time":151,"lineLyric":"ah~ah~"},{"time":"","lineLyric":""},{"time":153,"lineLyric":""},{"time":"","lineLyric":""},{"time":176,"lineLyric":"没错~就是你!"},{"time":"","lineLyric":""},{"time":178,"lineLyric":"准备好了吗?"},{"time":"","lineLyric":""},{"time":179,"lineLyric":"(๑•̀ㅂ•́)و✧"},{"time":"","lineLyric":""},{"time":181,"lineLyric":"「合」跟唱你的歌缭绕在耳边"},{"time":"","lineLyric":""},{"time":184,"lineLyric":"数下第一百零一次循环"},{"time":"","lineLyric":""},{"time":188,"lineLyric":"心跳加速着做长途连线"},{"time":"","lineLyric":""},{"time":191,"lineLyric":"抓拍最灿烂的笑脸"},{"time":"","lineLyric":""},{"time":194,"lineLyric":""},{"time":"","lineLyric":""},{"time":194,"lineLyric":"满天交错光线撞击地面"},{"time":"","lineLyric":""},{"time":198,"lineLyric":"每一道都碎成音符飞溅"},{"time":"","lineLyric":""},{"time":202,"lineLyric":"踩踏上重拍在弱拍跳跃"},{"time":"","lineLyric":""},{"time":206,"lineLyric":"把快乐聚拢成一点"},{"time":"","lineLyric":""},{"time":209,"lineLyric":""},{"time":"","lineLyric":""},{"time":209,"lineLyric":"满天交错光线搭建舞台"},{"time":"","lineLyric":""},{"time":213,"lineLyric":"每一次跳跃都闪烁变幻"},{"time":"","lineLyric":""},{"time":217,"lineLyric":"绚烂的应援荧光棒连接"},{"time":"","lineLyric":""},{"time":220,"lineLyric":"交织我们的经纬线"},{"time":"","lineLyric":""},{"time":223,"lineLyric":""},{"time":"","lineLyric":""},{"time":224,"lineLyric":"每一次对望都相隔遥远"},{"time":"","lineLyric":""},{"time":228,"lineLyric":"每一个动作都和你重叠"},{"time":"","lineLyric":""},{"time":231,"lineLyric":"指尖伸出轻敲下播放键"},{"time":"","lineLyric":""},{"time":235,"lineLyric":"世界另一端的邀约"},{"time":"","lineLyric":""},{"time":238,"lineLyric":""},{"time":"","lineLyric":""},{"time":238,"lineLyric":"都看见"}] || []

var song6 = [{"time":0,"lineLyric":"[by:我就很酷了]"},{"time":13,"lineLyric":"Whispered some words"},{"time":19,"lineLyric":"Cover all your windows"},{"time":24,"lineLyric":"Fear of bad days"},{"time":30,"lineLyric":"Waiting up late to call"},{"time":36,"lineLyric":"You say it's alright"},{"time":44,"lineLyric":"That I cannot be that guy"},{"time":50,"lineLyric":"Sometimes hard"},{"time":55,"lineLyric":"You could feel far"},{"time":61,"lineLyric":"From the start I'm fallen out"},{"time":67,"lineLyric":"Remember what you forgot"},{"time":72,"lineLyric":"Circle point of view"},{"time":81,"lineLyric":"I'll come around to you"},{"time":94,"lineLyric":""},{"time":115,"lineLyric":"Circle point of view"},{"time":125,"lineLyric":"I'll come around to you"},{"time":134,"lineLyric":"Circle point of view"},{"time":144,"lineLyric":"I'll come around to you"},{"time":153,"lineLyric":""}] || []

var songlist=[
    {title:"白衣少年",albumname:"白衣少年",singername:"许诗茵",originname:"mylove1",id:"1",url:"http://music.163.com/song/media/outer/url?id=545374102.mp3",songtime:"03:36",lrc:song1},
    {title:"其实都没有",albumname:"初爱",singername:"杨宗纬",originname:"mylove1",id:"1",url:"http://music.163.com/song/media/outer/url?id=25788001.mp3",songtime:"03:51",lrc:song2},
    {title:"雨霖铃",albumname:"鸣玉集",singername:"喵☆酱",originname:"mylove1",id:"2",url:"http://music.163.com/song/media/outer/url?id=532777368.mp3",songtime:"03:38",lrc:song3},
    {title:"打上花火",albumname:"打上花火",singername:"Akie秋绘",originname:"mylove1",id:"3",url:"http://music.163.com/song/media/outer/url?id=504916651.mp3",songtime:"04:47",lrc:song4},
    {title:"交织together",albumname:"交织together",singername:"泠鸢",originname:"mylove1",id:"4",url:"http://music.163.com/song/media/outer/url?id=460478768.mp3",songtime:"04:20",lrc:song5},
    {title:"Late",albumname:"Late",singername:"Howdy",originname:"mylove1",id:"5",url:"http://music.163.com/song/media/outer/url?id=519362766.mp3",songtime:"02:34",lrc:song6},
    
]


//audio对象 
var hhyaudio=$("#audio-box").append("<audio id='myaudio'></audio>")      
var myaudio=$("#myaudio")[0]
console.log(myaudio)

//-----------------2.audio生命周期
//初始化功能
function audio_init() {
    //默认关闭循环播放
    myaudio.loop=false
    //默认音量
    //myaudio.volume=0.3
}

window.onload=function () {
    audio_init()
}

//加载监听
myaudio.onloadstart=function () {
    console.log("1,页面加载开始")
}
//时间线监听
myaudio.ondurationchange=function () {
    console.log("2,时间发生了改变")
}
//元数据监听
myaudio.onloadedmetadata=function () {
    console.log("3,元数据加载")
}
//所有元数据加载完
myaudio.onloadeddata=function () {
    console.log("4,数据加载")
}
//加载完成事件 监听歌曲总时间
myaudio.oncanplay=function () {
    console.log("5,加载完成可播放")
    console.log(parseInt(myaudio.duration))
    //$(".end").html(Math.ceil(myaudio.duration))
}
//播放监听 监听正在播放的时间点
myaudio.ontimeupdate=function () {
    console.log("6,正在播放中")
}
//暂停监听
myaudio.onpause=function () {
    console.log("6,暂停")
}
//拖动监听
myaudio.onseeked=function () {
    console.log("7,拖动监听")
}
//完成播放监听,播放结束自动重新加载此歌曲
myaudio.onended=function () {
    console.log("8,完成播放")
    choosenum(activednum)
    $("#lrccontainer").scrollTop(0)
}
//生命周期完成






//默认的歌曲下标
var activednum=0
//歌曲名
var mysongname=$("#songname")
//专辑名
var myalbumname=$("#albumname")
//歌手名
var mysingername=$("#singername")

//------------------3.歌曲列表渲染函数
function initlist() {
    //清空列表
    $("#songlist").html("")
    //循环播放列表的每一个节点
    for(var item in songlist){
        $("#songlist").append("<li class='' onclick='choosenum("+item+")' ondblclick='myplay()' titlt='双击播放'><span class='song-title'>"+songlist[item].title+"</span><span class='singer-name'>"+songlist[item].singername+"</span><i class='fa fa-link'></i><span class='song-time'>"+songlist[item].songtime+"</span></li>")
        
    }
}

//-----------------4.秒数转换
function initsec(num) {
    var sec
    if(num%60<10){
        sec="0"+parseInt(num%60)
    }else {
        sec=parseInt(num%60)
    }
    return sec
}

//-----------------5.播放的信息获取和更新
function getinfo() {
    var myaudio=$("#myaudio")[0]
    //监听 audio加载完成事件
    myaudio.oncanplay=function () {
        //console.log("5,加载完成可播放")
        //输出歌曲信息
        //加载时间进度条最大长度
        $("#myrange").attr("max",myaudio.duration)
        //加载最大播放时间
        $("#end").html("0"+parseInt(myaudio.duration/60)+':'+initsec(myaudio.duration%60)+"")
        $("#mylrc1").children().removeClass("lrc-bg")
    }
    //监听 正在播放事件
    myaudio.ontimeupdate=function () {
        //console.log("6,正在播放中")
        //更新歌曲信息
        //更新当前播放时间
        $("#start").html("0"+parseInt(myaudio.currentTime/60)+':'+initsec(myaudio.currentTime%60)+"")
        //更新时间进度条
        $("#myrange").val(myaudio.currentTime)
        mylrc1()
    }
}

//----------------6-1.获取歌词函数
function getlrc() {
    //清空歌词内容
    $("#mylrc1").html("")
    $("#mylrc2").html("")
    //console.log(songlist[activednum].lrc)
    //循环输出歌词内容
    for(var i in songlist[activednum].lrc){
        //渲染内部歌词框
        $("#mylrc1").append("<li class='mylrc' id='mylrc-"+i+"' data-time='"+songlist[activednum].lrc[i].time+"' title='歌词'>"+songlist[activednum].lrc[i].lineLyric+"</li>")
        //渲染外部歌词框
        $("#lrcbox2").html("<div data-time='"+songlist[activednum].lrc[0].time+"'>"+songlist[activednum].lrc[0].lineLyric+"</div>")      
    }
}
//---------------6-2.当前播放时间与歌词同步函数--------------
function mylrc1(){
    //当前播放时间
    var nowtime=parseInt(myaudio.currentTime)
    //歌词数量
    var lrclength=$("#mylrc1").children().length
    //console.log(nowtime)
    for(var lrcnum=0; lrcnum<lrclength; lrcnum++){
        //歌词对应的时间点
        var lrctime=$("#mylrc-"+lrcnum+"").attr("data-time")
        if(nowtime==lrctime){
            $("#mylrc-"+lrcnum+"").siblings().removeClass("lrc-bg")
            $("#mylrc-"+lrcnum+"").addClass("lrc-bg")
            //更新外部歌词框
            $("#lrcbox2").html("<div data-time='"+songlist[activednum].lrc[lrcnum].time+"'>"+songlist[activednum].lrc[lrcnum].lineLyric+"</div>")
            //从第4句开始滚动条下移
            if(lrcnum>=4&nowtime>0){
                todown()
            }
        }
    }
}
//向下滚动
function todown(){
    $("#lrccontainer").scrollTop($("#lrccontainer").scrollTop()+9)
}
//滚动条归原位
function toup(){
    $("#lrccontainer").scrollTop(0)
}



//------------------7.加载当前歌曲信息(主函数)---------------------------
function choosenum(num) {
    //btplay=btplay || false
    //console.log(num,songlist[num])
    $("#myaudio").attr("src",songlist[num].url)
    //清除上一个歌曲的样式
    $("#songlist li:eq("+activednum+")").removeClass("songlist-bg")
    //渲染当前选择歌曲的样式
    $("#songlist li:eq("+num+")").addClass("songlist-bg")
    //点击歌曲列表恢复播放按钮，暂停光盘动画，指针恢复原位
    $(".fa-pause").removeClass("fa-pause").addClass("fa-play")
    $(".disc-arc").addClass("my-animation-pause")
    $(".my-animation2").removeClass("my-animation2").addClass("needle")
    //更新歌曲名，专辑名，歌手名
    mysongname.html(songlist[num].title)
    $("#songname-left").html(songlist[num].title)
    myalbumname.html(songlist[num].albumname)
    mysingername.html(songlist[num].singername)
    $("#singername-left").html(songlist[num].singername)
    //更新当前的选择（下标）
    activednum=num
        toup()
        getinfo()
        getlrc()
    //执行播放
    //myaudio.play()
}

//------------------8.初始化音频
$(function () {
    //加载所有歌曲列表
    initlist()
    //加载当前歌曲信息
    choosenum(activednum)
    //加载音量    
    myvolume()
})

//------------------9.播放与暂停切换,光盘与指针动画开关
function myplay() {
    if($(".fa-play").hasClass("fa-play")){
        myaudio.play()
        $(".fa-play").removeClass("fa-play").addClass("fa-pause")
        $(".disc-arc").addClass("my-animation")
        $(".disc-arc").removeClass("my-animation-pause")
        $(".needle").removeClass("needle").addClass("my-animation2")
    }else{
        myaudio.pause()
        $(".fa-pause").removeClass("fa-pause").addClass("fa-play")
        $(".disc-arc").addClass("my-animation-pause")
        $(".my-animation2").removeClass("my-animation2").addClass("needle")
    }  
}
 
//------------------10.上一首
function myprev(){
    var prevnum
    prevnum=activednum-1<0 ? (songlist.length-1) : (activednum-1)
    choosenum(prevnum)
    myplay()   
}

//------------------11.下一首
function mynext(){
    var nextnum
    nextnum=activednum+1>=songlist.length ? 0 : (activednum+1)
    choosenum(nextnum)
    myplay() 
}

//------------------12.随机播放
function myrandom() {
    //随机一个范围在songlist数组下标范围内的随机数
    var mynum=parseInt(Math.random()*songlist.length)
    //判断当前播放的下标与随机的下标是否一致，如果一致则重新获取，直到不一致
    while(mynum==activednum){
        mynum=parseInt(Math.random()*songlist.length)
    }
    choosenum(mynum,true)
    myplay()
    console.log(mynum,activednum)
    //jquery 转化为 javascript 标签
    console.log($("#myaudio").get(0))
}

//------------------13.处理滑动选择器事件
function mytime() {
    console.log($("#myrange").val())
    var myaudio=$("#myaudio").get(0)
    //播放器的时间为滑动控件的时间
    myaudio.currentTime=$("#myrange").val()
}

//------------------14.声音控制
function myvolume() {
    var myaudio=$("#myaudio")[0]
    myaudio.volume=$("#myvolume").val()
    console.log("音量："+myaudio.volume+"")
    //音量滑动监听
    if ($("#myvolume").val()==0){
        $("#fa-volume").removeClass("fa-volume-up").addClass("fa-volume-off")
    }else{
        $("#fa-volume").removeClass("fa-volume-off").addClass("fa-volume-up")
    }
  
}

//-----------------15.静音按钮
function myvolume2(){
    //var myaudio=$("#myaudio")[0]
    if($("#fa-volume").hasClass("fa-volume-up")){
        $("#myvolume").val(0)
        myaudio.volume=0
        $("#fa-volume").removeClass("fa-volume-up").addClass("fa-volume-off") 
    }else{
        $("#fa-volume").removeClass("fa-volume-off").addClass("fa-volume-up")
        $("#myvolume").val(0.3)
        myaudio.volume=0.3
    }
}




//-----------------16.评论功能
function mycomment(){
    //获取输入框内容
    var commentvalue=$("#mytextarea").val()
    //当输入框不为空时渲染内容
    if(commentvalue!=""){
        //渲染评论内容
        $(".new-comment").prepend("<div class='content'><p><span class='username'><a href='javascript:void(0);'>HHY：</a></span><span class='usersay'>"+commentvalue+"</span></p><div class='btngroups'><span class='comment-time'>9月3日 11:11:11</span><span class='comment-btn'><a href='javascript:void(0);' class='support-btn'><i class='fa fa-thumbs-o-up'></i></a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href='javascript:void(0);' class='share-btn'>分享</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href='javascript:void(0);' class='reply-btn'>回复</a></span></div><div class='userface'><a href='javascript:void(0);'><img src='./图片/头像.jpg' alt='' /></a></div></div>")
        //清空输入框
        $("#mytextarea").val("")
    }
}

//-----------------17.回车监听事件
$(window).keydown(function (res) {
    //回车判断
    if(res.keyCode==13){
        //执行发送函数
        mycomment()
        var contentlength=$(".content").length
        $("#comment-number").html("<span class='comment-number' id='comment-number'>（已有"+contentlength+"条评论）</span>")
        $("#new-comment-title").html("<div class='new-comment-title' id='new-comment-title'>最新评论("+contentlength+")</div>")
    } 
})

//-----------------18.喜欢按钮
function redheart(){
    if($("#heart-btn").hasClass("fa-heart-o")){
        $("#heart-btn").removeClass("fa-heart-o").addClass("fa-heart")
    }else{
        $("#heart-btn").removeClass("fa-heart").addClass("fa-heart-o")
    }
}

//------------------19.收藏按钮
function collection(){
    $("#collection-btn").toggleClass("collection-red")
}

//------------------20.歌曲列表显示隐藏
function songlisttoggle(){
    $("#songlistcontainer").toggle()
    $("#fa-list-alt").toggleClass("fa-list-bg")
}    

//------------------21.外部歌词框,按钮
function lrcbox2(){
    $("#lrcbox2").toggle()
    $("#words").toggleClass("words-bg")
}

//-----------------22.歌曲列表关闭按钮
function closelist(){
    $(".songlistcontainer").hide()
}

//-----------------23.歌曲列表标题切换
$('.songlist-head-title span').on('click', function () {
    $('.songlist-head-title span').removeClass('songlist-head-active');
    $(this).addClass('songlist-head-active');
});

//-----------------24.歌曲选中阴影
// $('.songlist li').on('click', function () {
//     $('.songlist li:nth-child(2n)').css("background","#f5f5f7");
//     $('.songlist li:nth-child(2n-1)').css("background","#fafafa");
//     $(this).css("background","#E3E3E5");
// });




